[gd_scene load_steps=9 format=3 uid="uid://dub12avp0i8ud"]

[ext_resource type="Script" path="res://components/weapon/wand.gd" id="1_r2q1q"]

[sub_resource type="GDScript" id="GDScript_uhq8u"]
script/source = "extends StateMachine

func _ready() -> void:
	super._ready()

"

[sub_resource type="GDScript" id="GDScript_dpm7t"]
script/source = "extends State

var weapon: Weapon

func _ready() -> void:
	pass

func enter() -> void:
	weapon = owner as Weapon
	print(\"%s -> Idle\" % weapon.name)
	
	#for ability in weapon.weapon_abilities:
		#print(ability)
	super.enter()

func update(_delta: float) -> void:
	if not is_active():
		return
	if weapon.trigger_pressed:
		emit_signal(\"finished\", \"BeforeUse\")
	
func exit() -> void:
	print(\"%s <- Idle\" % weapon.name)
	super.exit()

func _exit_tree() -> void:
	pass

"

[sub_resource type="GDScript" id="GDScript_om8ju"]
script/source = "extends State

var weapon: Weapon

func _ready() -> void:
	pass

func enter() -> void:
	weapon = owner as Weapon
	print(\"%s -> BeforeUse\" % weapon.name)
	# 判断当前武器是否可以使用
	super.enter()

func update(_delta: float) -> void:
	if not is_active():
		return
	
func exit() -> void:
	super.exit()

func _exit_tree() -> void:
	pass

"

[sub_resource type="GDScript" id="GDScript_36jsr"]
script/source = "extends State

func _ready() -> void:
	pass

func enter() -> void:
	super.enter()

func update(_delta: float) -> void:
	if not is_active():
		return
	
func exit() -> void:
	super.exit()

func _exit_tree() -> void:
	pass

"

[sub_resource type="GDScript" id="GDScript_43gfs"]
script/source = "extends State

func _ready() -> void:
	pass

func enter() -> void:
	super.enter()

func update(_delta: float) -> void:
	if not is_active():
		return
	
func exit() -> void:
	super.exit()

func _exit_tree() -> void:
	pass

"

[sub_resource type="GDScript" id="GDScript_jxwcj"]
script/source = "extends State

func _ready() -> void:
	pass

func enter() -> void:
	super.enter()

func update(_delta: float) -> void:
	if not is_active():
		return
	
func exit() -> void:
	super.exit()

func _exit_tree() -> void:
	pass

"

[sub_resource type="GDScript" id="GDScript_w52mh"]
script/source = "extends State

func _ready() -> void:
	pass

func enter() -> void:
	super.enter()

func update(_delta: float) -> void:
	if not is_active():
		return
	
func exit() -> void:
	super.exit()

func _exit_tree() -> void:
	pass

"

[node name="Wand" type="Node2D"]
script = ExtResource("1_r2q1q")

[node name="Slots" type="Node" parent="."]

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("start_state")]
script = SubResource("GDScript_uhq8u")
start_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = SubResource("GDScript_dpm7t")

[node name="BeforeUse" type="Node" parent="StateMachine"]
script = SubResource("GDScript_om8ju")

[node name="Use" type="Node" parent="StateMachine"]
script = SubResource("GDScript_36jsr")

[node name="DelayBetweenUses" type="Node" parent="StateMachine"]
script = SubResource("GDScript_43gfs")

[node name="AfterUser" type="Node" parent="StateMachine"]
script = SubResource("GDScript_jxwcj")

[node name="Reload" type="Node" parent="StateMachine"]
script = SubResource("GDScript_w52mh")

[node name="Sprite2D" type="Sprite2D" parent="."]
